# üèóÔ∏è **Data Warehouse in Microsoft Fabric**

---

## üß≠ **Introduction**

A **Data Warehouse** in Microsoft Fabric provides a **centralized, high-performance, analytical store** for structured data. It enables organizations to run **complex analytical queries** at scale using **T-SQL (Transact-SQL)**.

Fabric Data Warehouse is built on the **lake-centric architecture** of **OneLake**, meaning your warehouse data lives **directly in the data lake** (in Delta format) ‚Äî giving you **open, accessible, and high-performing** analytics.

---

## üîπ **1. What is a Data Warehouse in Microsoft Fabric?**

A **Fabric Data Warehouse (DW)** is a **cloud-native, serverless, scalable, and fully managed** data warehousing solution designed to integrate seamlessly with **other Fabric components** such as:

* **Data Factory** (for ingestion)
* **Data Engineering** (for preparation)
* **Power BI** (for visualization)
* **Real-Time Analytics** (for streaming insights)

Fabric‚Äôs DW leverages **open data formats (Delta Parquet)** and integrates directly with **OneLake**, providing:

* Unified storage for all workloads
* Simplified data access and management
* Consistent security and governance

---

### **Diagram: Fabric Data Warehouse in the Fabric Ecosystem**

```
             +--------------------------------------+
             |         Microsoft Fabric             |
             +--------------------------------------+
                ‚îÇ               ‚îÇ               ‚îÇ
         +-----------+   +-------------+   +---------------+
         | Data Factory|  | Data Warehouse | | Power BI     |
         | (Ingestion) |  | (T-SQL Query)  | | (Visualization)|
         +-----------+   +-------------+   +---------------+
                ‚îÇ               ‚îÇ
                ‚îî------- OneLake (Unified Storage) -------‚îò
```

---

## üîπ **2. T-SQL Endpoints**

### **What is a T-SQL Endpoint?**

Each Data Warehouse in Fabric automatically exposes a **T-SQL endpoint**.
This allows users to connect using familiar SQL tools such as:

* **SQL Server Management Studio (SSMS)**
* **Azure Data Studio**
* **Power BI**
* **Notebooks (via SQL cells)**

The endpoint behaves like a traditional SQL database connection, supporting:

* Standard **T-SQL syntax** for querying, creating, and managing objects.
* **Views, Stored Procedures, Functions, and Security Roles**.

---

### **Example: Using T-SQL Endpoint**

Suppose you have a Fabric Data Warehouse named `RetailDW`.

You can connect to it and run queries like:

```sql
-- Create a schema and table
CREATE SCHEMA sales;
CREATE TABLE sales.Orders
(
    OrderID INT,
    CustomerID INT,
    OrderDate DATE,
    TotalAmount DECIMAL(10,2)
);

-- Insert sample data
INSERT INTO sales.Orders VALUES (1, 101, '2025-10-08', 500.00);

-- Query the table
SELECT * FROM sales.Orders WHERE TotalAmount > 100;
```

**Note:** You can run these queries inside Fabric directly or through SSMS using the T-SQL endpoint URL.

---

### **Diagram: T-SQL Connectivity**

```
          +--------------------------+
          |   T-SQL Endpoint (SQL)   |
          +-----------+--------------+
                      ‚îÇ
     +--------------------------------------+
     | Fabric Data Warehouse (Tables, Views)|
     +--------------------------------------+
                      ‚îÇ
                  [OneLake Storage]
```

---

## üîπ **3. Query Performance and Optimization**

### **Fabric‚Äôs Query Engine**

Fabric uses a **distributed query processing engine** that:

* Automatically **optimizes execution plans**
* Scales dynamically based on workload
* Caches frequently accessed data
* Uses **columnar storage** for faster analytics

---

### **Key Optimization Techniques**

| Optimization Feature       | Description                                                                |
| -------------------------- | -------------------------------------------------------------------------- |
| **Columnar Storage**       | Data stored in compressed, columnar format for faster aggregations         |
| **Partitioning**           | Splits large tables by date, region, or other keys for parallel processing |
| **Result Caching**         | Frequently used query results are cached for reuse                         |
| **Materialized Views**     | Pre-computed summaries for faster queries                                  |
| **Statistics and Indexes** | Improve query execution by guiding the optimizer                           |

---

### **Example ‚Äì Query Optimization**

#### Original Query:

```sql
SELECT CustomerID, SUM(TotalAmount) AS TotalSpent
FROM sales.Orders
WHERE YEAR(OrderDate) = 2025
GROUP BY CustomerID;
```

#### Optimization Strategies:

1. **Partition** the table by `OrderDate` for faster filtering.
2. Use a **materialized view** for pre-aggregated totals.
3. **Cache** the result for repeated Power BI reports.

#### Materialized View Example:

```sql
CREATE MATERIALIZED VIEW sales.YearlyTotals
AS
SELECT YEAR(OrderDate) AS Year, CustomerID, SUM(TotalAmount) AS TotalSpent
FROM sales.Orders
GROUP BY YEAR(OrderDate), CustomerID;
```

---

### **Diagram: Query Optimization in Action**

```
Query Request
     ‚îÇ
     ‚ñº
+-------------------------+
|  Fabric Query Optimizer |
+-------------------------+
     ‚îÇ       ‚îÇ       ‚îÇ
  Caching  Partitioning  Materialized View
     ‚îÇ       ‚îÇ       ‚îÇ
     ‚ñº       ‚ñº       ‚ñº
+----------------------------------------+
|   OneLake (Delta-based Data Storage)   |
+----------------------------------------+
```

---

## üîπ **4. Schema Management**

### **Schemas in Fabric Data Warehouse**

A **schema** is a logical container for organizing tables, views, and other database objects.

* Helps maintain **modularity and organization**
* Enables **security and role-based access control**
* Allows **multiple teams** to work on separate logical areas

---

### **Example: Schema Management**

```sql
CREATE SCHEMA finance;
CREATE SCHEMA hr;

-- Create tables in each schema
CREATE TABLE finance.Revenue (Month VARCHAR(10), Amount DECIMAL(10,2));
CREATE TABLE hr.Employees (EmpID INT, Name VARCHAR(50), Dept VARCHAR(30));

-- Query across schemas
SELECT e.Name, f.Amount
FROM hr.Employees e
JOIN finance.Revenue f ON e.Dept = 'Sales';
```

---

### **Diagram: Schema Organization**

```
+--------------------------------+
| Fabric Data Warehouse           |
|--------------------------------|
| Schemas:                       |
|   ‚Ä¢ sales                      |
|   ‚Ä¢ finance                    |
|   ‚Ä¢ hr                         |
|--------------------------------|
| Tables, Views, Stored Procs     |
+--------------------------------+
```

---

## üîπ **5. Integration with Power BI**

One of the strongest advantages of Fabric DW is **native Power BI integration**.
Because both reside within Microsoft Fabric, data never leaves OneLake ‚Äî ensuring:

* **No duplication or movement**
* **Low latency**
* **Unified governance and security**

---

### **Steps to Connect Power BI to Fabric DW**

1. Open **Power BI Desktop** or **Power BI Service**.
2. Select **Get Data ‚Üí Microsoft Fabric Data Warehouse**.
3. Choose your **workspace** and **Data Warehouse**.
4. Load data using **DirectQuery** or **Import mode**.
5. Build dashboards using your warehouse tables.

---

### **Example Scenario**

A business wants to analyze sales performance:

1. Data is stored in **Fabric DW (sales schema)**.
2. Power BI connects to it directly.
3. Reports visualize total revenue, top customers, and year-over-year growth.
4. Any update in the warehouse reflects immediately in Power BI (DirectQuery mode).

---

### **Diagram: Power BI Integration with Fabric DW**

```
                +-----------------------+
                | Power BI Reports      |
                | (Dashboards, KPIs)    |
                +----------+------------+
                           ‚îÇ
                   DirectQuery / Import
                           ‚îÇ
                +-----------------------+
                | Fabric Data Warehouse |
                +----------+------------+
                           ‚îÇ
                      [OneLake Storage]
```

---

## üß† **Summary**

| Concept                   | Description                                                            |
| ------------------------- | ---------------------------------------------------------------------- |
| **Fabric Data Warehouse** | Unified, serverless, and scalable analytical database built on OneLake |
| **T-SQL Endpoint**        | SQL interface for querying and managing data                           |
| **Query Optimization**    | Uses partitioning, caching, and materialized views                     |
| **Schema Management**     | Logical separation of objects for governance                           |
| **Power BI Integration**  | Native connection with unified security and performance                |

---

## ‚ùì **Practice Questions and Answers**

**Q1.** What is a Data Warehouse in Microsoft Fabric?
**A1.** It‚Äôs a cloud-native, serverless, scalable analytical store built on OneLake, designed for structured data querying using T-SQL.

---

**Q2.** What is the purpose of a T-SQL endpoint?
**A2.** It allows users to connect to the Data Warehouse using SQL tools and execute queries directly via standard T-SQL syntax.

---

**Q3.** How does Fabric optimize query performance?
**A3.** Through techniques like caching, partitioning, columnar storage, and materialized views.

---

**Q4.** What is schema management, and why is it important?
**A4.** It helps organize and secure database objects logically, supporting collaboration and access control.

---

**Q5.** How is Power BI integrated with Fabric DW?
**A5.** Natively through OneLake, allowing direct connections without data movement and ensuring consistent governance.

---

**Q6.** Can you use both DirectQuery and Import mode in Power BI with Fabric DW?
**A6.** Yes, Power BI supports both DirectQuery (live connection) and Import mode (cached data) for Fabric DW.

---

**Q7.** What is the underlying storage format used by Fabric DW?
**A7.** Delta format on OneLake ‚Äî providing ACID transactions, open data access, and scalability.

